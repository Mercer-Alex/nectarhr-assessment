import{d as E,r as s,f as g,g as H,c as a,h as I,a as l,i as T,j as q,b as f,k as r,t as n,w as i,l as w,m as N,F as C,n as b,v as K,o,_ as X}from"./index-D6juNxKW.js";const z={class:"card"},G={class:"user-table-all"},J={key:0,class:"all-user"},P={class:"user-table-duplicates"},Q={key:0,class:"duplicate-users"},R={key:0},W={class:"user-table-country"},Y={key:0,class:"users-country"},Z=["value"],_=E({__name:"UserList",setup(h){const v=s(!1),d=s(!1),p=s(!1),S=s([]),U=s([]),$=s([]),m=s(""),c=s(2),k=s(!1),A=s(!1),V=s(!1),y=s("first_name"),x=s("name"),B=["US","CA","UK","UA","DE","MX"],F=g(()=>[...S.value].sort((u,e)=>u[y.value].localeCompare(e[y.value]))),j=g(()=>[...U.value].sort((u,e)=>x.value==="name"?u.name.localeCompare(e.name):e.count-u.count)),M=async()=>{const u=await fetch(`/api/users?active=${k.value}`);S.value=await u.json()},L=async()=>{const u=`/api/users/duplicate-names?count=${c.value}&active=${A.value}`,D=await(await fetch(u)).json();console.log(U),U.value=D.duplicates},O=async()=>{if(!m.value)return;const u=await fetch(`/api/users/by-country/${m.value}?active=${V.value}`);$.value=await u.json()};return H(async()=>{M(),L()}),(u,e)=>{const D=q("H2");return o(),a("div",z,[I(D,null,{default:T(()=>e[10]||(e[10]=[r("User Data")])),_:1}),l("div",G,[l("h3",{onClick:e[0]||(e[0]=t=>v.value=!v.value),style:{cursor:"pointer"}},[e[11]||(e[11]=r(" All Users ")),l("span",null,n(v.value?"▸":"▾"),1)]),v.value?f("",!0):(o(),a("div",J,[l("label",null,[e[13]||(e[13]=r(" Sort by: ")),i(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t)},e[12]||(e[12]=[l("option",{value:"first_name"},"First Name",-1),l("option",{value:"last_name"},"Last Name",-1)]),512),[[w,y.value]])]),l("label",null,[i(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>k.value=t)},null,512),[[N,k.value]]),e[14]||(e[14]=r(" Only Active "))]),l("button",{onClick:M},"Load All Users"),l("ul",null,[(o(!0),a(C,null,b(F.value,t=>(o(),a("li",{key:t.id},n(t.first_name)+" "+n(t.last_name)+" ("+n(t.country)+") - "+n(t.active?"Active":"Inactive"),1))),128))])]))]),l("div",P,[l("h3",{onClick:e[3]||(e[3]=t=>d.value=!d.value),style:{cursor:"pointer"}},[r(" Duplicate User Names (Min Count: "+n(c.value)+") ",1),l("span",null,n(d.value?"▸":"▾"),1)]),d.value?f("",!0):(o(),a("div",Q,[l("label",null,[e[15]||(e[15]=r(" Min Count: ")),i(l("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t),min:"1"},null,512),[[K,c.value,void 0,{number:!0}]])]),l("label",null,[i(l("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>A.value=t)},null,512),[[N,A.value]]),e[16]||(e[16]=r(" Only Active "))]),l("label",null,[e[18]||(e[18]=r(" Sort by: ")),i(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>x.value=t)},e[17]||(e[17]=[l("option",{value:"name"},"Name",-1),l("option",{value:"count"},"Count",-1)]),512),[[w,x.value]])]),l("button",{onClick:L},"Load Duplicates"),l("ul",null,[(o(!0),a(C,null,b(j.value,t=>(o(),a("li",{key:t.name},[r(n(t.name)+" — Appeared "+n(t.count)+" time",1),t.count>1?(o(),a("span",R,"s")):f("",!0)]))),128))])]))]),l("div",W,[l("h3",{onClick:e[7]||(e[7]=t=>p.value=!p.value),style:{cursor:"pointer"}},[e[19]||(e[19]=r(" Users by Country ")),l("span",null,n(p.value?"▸":"▾"),1)]),p.value?f("",!0):(o(),a("div",Y,[i(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>m.value=t),onChange:O},[e[20]||(e[20]=l("option",{disabled:"",value:""},"Select a country",-1)),(o(),a(C,null,b(B,t=>l("option",{key:t,value:t},n(t),9,Z)),64))],544),[[w,m.value]]),l("label",null,[i(l("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>V.value=t)},null,512),[[N,V.value]]),e[21]||(e[21]=r(" Only Active "))]),l("ul",null,[(o(!0),a(C,null,b($.value,t=>(o(),a("li",{key:t.id},n(t.first_name)+" "+n(t.last_name)+"s ",1))),128))])]))])])}}}),te=X(_,[["__scopeId","data-v-1904d910"]]);export{te as default};
