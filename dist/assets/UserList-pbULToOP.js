import{d as B,r as s,f as D,g as F,c as o,h as j,a as l,i as O,j as E,b as S,k as i,t as a,w as v,l as k,m as A,F as c,n as f,v as H,o as u,_ as I}from"./index-C8V_qaNU.js";const T={class:"card"},q={class:"user-table-all"},K={key:0},X={class:"user-table-duplicates"},z={key:0},G={class:"user-table-country"},J=["value"],P=B({__name:"UserList",setup(Q){const d=s(!1);s(!1),s(!1);const V=s([]),b=s([]),x=s([]),p=s(""),m=s(2),r=s(!1),y=s("first_name"),C=s("name"),M=["US","CA","UK","UA","DE","MX"],L=D(()=>[...V.value].sort((n,e)=>n[y.value].localeCompare(e[y.value]))),$=D(()=>[...b.value].sort((n,e)=>C.value==="name"?n.name.localeCompare(e.name):e.count-n.count)),w=async()=>{const n=await fetch(`/api/users?active=${r.value}`);V.value=await n.json()},N=async()=>{const n=`/api/users/duplicate-names?count=${m.value}&active=${r.value}`,U=await(await fetch(n)).json();console.log(b),b.value=U.duplicates},g=async()=>{if(!p.value)return;const n=await fetch(`/api/users/by-country/${p.value}?active=${r.value}`);x.value=await n.json()};return F(async()=>{w(),N()}),(n,e)=>{const U=E("H2");return u(),o("div",T,[j(U,null,{default:O(()=>e[8]||(e[8]=[i("User Data")])),_:1}),l("div",q,[l("h3",{onClick:e[0]||(e[0]=t=>d.value=!d.value),style:{cursor:"pointer"}},[e[9]||(e[9]=i(" All Users ")),l("span",null,a(d.value?"▸":"▾"),1)]),d.value?S("",!0):(u(),o("div",K,[l("label",null,[e[11]||(e[11]=i(" Sort by: ")),v(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t)},e[10]||(e[10]=[l("option",{value:"first_name"},"First Name",-1),l("option",{value:"last_name"},"Last Name",-1)]),512),[[k,y.value]])]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t)},null,512),[[A,r.value]]),e[12]||(e[12]=i(" Only Active "))]),l("button",{onClick:w},"Load All Users"),l("ul",null,[(u(!0),o(c,null,f(L.value,t=>(u(),o("li",{key:t.id},a(t.first_name)+" "+a(t.last_name)+" ("+a(t.country)+") - "+a(t.active?"Active":"Inactive"),1))),128))])]))]),l("div",X,[l("h3",null,"Duplicate User Names (Min Count: "+a(m.value)+")",1),l("label",null,[e[13]||(e[13]=i(" Min Count: ")),v(l("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),min:"1"},null,512),[[H,m.value,void 0,{number:!0}]])]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>r.value=t)},null,512),[[A,r.value]]),e[14]||(e[14]=i(" Only Active "))]),l("label",null,[e[16]||(e[16]=i(" Sort by: ")),v(l("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>C.value=t)},e[15]||(e[15]=[l("option",{value:"name"},"Name",-1),l("option",{value:"count"},"Count",-1)]),512),[[k,C.value]])]),l("button",{onClick:N},"Load Duplicates"),l("ul",null,[(u(!0),o(c,null,f($.value,t=>(u(),o("li",{key:t.name},[i(a(t.name)+" — Appeared "+a(t.count)+" time",1),t.count>1?(u(),o("span",z,"s")):S("",!0)]))),128))])]),l("div",G,[e[19]||(e[19]=l("h3",null,"Users by Country",-1)),v(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>p.value=t),onChange:g},[e[17]||(e[17]=l("option",{disabled:"",value:""},"Select a country",-1)),(u(),o(c,null,f(M,t=>l("option",{key:t,value:t},a(t),9,J)),64))],544),[[k,p.value]]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>r.value=t)},null,512),[[A,r.value]]),e[18]||(e[18]=i(" Only Active "))]),l("ul",null,[(u(!0),o(c,null,f(x.value,t=>(u(),o("li",{key:t.id},a(t.first_name)+" "+a(t.last_name)+"s ",1))),128))])])])}}}),W=I(P,[["__scopeId","data-v-7cfb923b"]]);export{W as default};
