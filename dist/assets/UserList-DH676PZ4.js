import{d as M,r as u,f as w,g as S,c as a,h as L,a as n,i as g,j as B,k as r,w as m,l as x,F as p,m as y,t as l,v as F,n as j,o,b as $,_ as E}from"./index-ez80qR5w.js";const H={class:"card"},I={class:"user-table-all"},T={class:"user-table-duplicates"},q={key:0},K={class:"user-table-country"},O=["value"],X=M({__name:"UserList",setup(z){const U=u([]),i=u([]),b=u([]),d=u(""),c=u(2),f=u(!1),v=u("first_name"),A=u("name"),N=["US","CA","UK","UA","DE","MX"],V=w(()=>[...U.value].sort((s,e)=>s[v.value].localeCompare(e[v.value])));w(()=>[...i.value].sort((s,e)=>A.value==="name"?s.name.localeCompare(e.name):e.count-s.count));const k=async()=>{const s=await fetch("/api/users");U.value=await s.json()},_=async()=>{const s=`/api/users/duplicate-names?count=${c.value}&active=${f.value}`,C=await(await fetch(s)).json();console.log(i),i.value=C.duplicates},D=async()=>{if(!d.value)return;const s=await fetch(`/api/users/by-country/${d.value}`);b.value=await s.json()};return S(async()=>{k(),_()}),(s,e)=>{const C=B("H2");return o(),a("div",H,[L(C,null,{default:g(()=>e[4]||(e[4]=[r("User Data")])),_:1}),n("div",I,[e[7]||(e[7]=n("h3",null,"All Users",-1)),n("label",null,[e[6]||(e[6]=r(" Sort by: ")),m(n("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t)},e[5]||(e[5]=[n("option",{value:"first_name"},"First Name",-1),n("option",{value:"last_name"},"Last Name",-1)]),512),[[x,v.value]])]),n("button",{onClick:k},"Load All Users"),n("ul",null,[(o(!0),a(p,null,y(V.value,t=>(o(),a("li",{key:t.id},l(t.first_name)+" "+l(t.last_name)+" ("+l(t.country)+") - "+l(t.active?"Active":"Inactive"),1))),128))])]),n("div",T,[n("h3",null,"Duplicate User Names (Min Count: "+l(c.value)+")",1),n("label",null,[e[8]||(e[8]=r(" Min Count: ")),m(n("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),min:"1"},null,512),[[F,c.value,void 0,{number:!0}]])]),n("label",null,[m(n("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t)},null,512),[[j,f.value]]),e[9]||(e[9]=r(" Only Active "))]),n("button",{onClick:_},"Load Duplicates"),n("ul",null,[(o(!0),a(p,null,y(i.value,t=>(o(),a("li",{key:t.name},[r(l(t.name)+" â€” Appeared "+l(t.count)+" time",1),t.count>1?(o(),a("span",q,"s")):$("",!0)]))),128))])]),n("div",K,[e[11]||(e[11]=n("h3",null,"Users by Country",-1)),m(n("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),onChange:D},[e[10]||(e[10]=n("option",{disabled:"",value:""},"Select a country",-1)),(o(),a(p,null,y(N,t=>n("option",{key:t,value:t},l(t),9,O)),64))],544),[[x,d.value]]),n("ul",null,[(o(!0),a(p,null,y(b.value,t=>(o(),a("li",{key:t.id},l(t.first_name)+" "+l(t.last_name)+"s ",1))),128))])])])}}}),J=E(X,[["__scopeId","data-v-9a7a1b8c"]]);export{J as default};
