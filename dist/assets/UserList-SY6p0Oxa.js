import{d as F,r as a,f as M,g as j,c as o,h as O,a as l,i as E,j as H,b as A,k as r,t as n,w as v,l as V,m as x,F as f,n as b,v as I,o as u,_ as T}from"./index-C2MMKiyv.js";const q={class:"card"},K={class:"user-table-all"},X={key:0},z={class:"user-table-duplicates"},G={key:0},J={key:0},P={class:"user-table-country"},Q=["value"],R=F({__name:"UserList",setup(W){const d=a(!1),p=a(!1);a(!1);const w=a([]),C=a([]),D=a([]),m=a(""),y=a(2),i=a(!1),c=a("first_name"),U=a("name"),$=["US","CA","UK","UA","DE","MX"],L=M(()=>[...w.value].sort((s,e)=>s[c.value].localeCompare(e[c.value]))),g=M(()=>[...C.value].sort((s,e)=>U.value==="name"?s.name.localeCompare(e.name):e.count-s.count)),N=async()=>{const s=await fetch(`/api/users?active=${i.value}`);w.value=await s.json()},S=async()=>{const s=`/api/users/duplicate-names?count=${y.value}&active=${i.value}`,k=await(await fetch(s)).json();console.log(C),C.value=k.duplicates},B=async()=>{if(!m.value)return;const s=await fetch(`/api/users/by-country/${m.value}?active=${i.value}`);D.value=await s.json()};return j(async()=>{N(),S()}),(s,e)=>{const k=H("H2");return u(),o("div",q,[O(k,null,{default:E(()=>e[9]||(e[9]=[r("User Data")])),_:1}),l("div",K,[l("h3",{onClick:e[0]||(e[0]=t=>d.value=!d.value),style:{cursor:"pointer"}},[e[10]||(e[10]=r(" All Users ")),l("span",null,n(d.value?"▸":"▾"),1)]),d.value?A("",!0):(u(),o("div",X,[l("label",null,[e[12]||(e[12]=r(" Sort by: ")),v(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t)},e[11]||(e[11]=[l("option",{value:"first_name"},"First Name",-1),l("option",{value:"last_name"},"Last Name",-1)]),512),[[V,c.value]])]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t)},null,512),[[x,i.value]]),e[13]||(e[13]=r(" Only Active "))]),l("button",{onClick:N},"Load All Users"),l("ul",null,[(u(!0),o(f,null,b(L.value,t=>(u(),o("li",{key:t.id},n(t.first_name)+" "+n(t.last_name)+" ("+n(t.country)+") - "+n(t.active?"Active":"Inactive"),1))),128))])]))]),l("div",z,[l("h3",{onClick:e[3]||(e[3]=t=>p.value=!p.value),style:{cursor:"pointer"}},[r(" Duplicate User Names (Min Count: "+n(y.value)+") ",1),l("span",null,n(p.value?"▸":"▾"),1)]),p.value?A("",!0):(u(),o("div",G,[l("label",null,[e[14]||(e[14]=r(" Min Count: ")),v(l("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>y.value=t),min:"1"},null,512),[[I,y.value,void 0,{number:!0}]])]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>i.value=t)},null,512),[[x,i.value]]),e[15]||(e[15]=r(" Only Active "))]),l("label",null,[e[17]||(e[17]=r(" Sort by: ")),v(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>U.value=t)},e[16]||(e[16]=[l("option",{value:"name"},"Name",-1),l("option",{value:"count"},"Count",-1)]),512),[[V,U.value]])]),l("button",{onClick:S},"Load Duplicates"),l("ul",null,[(u(!0),o(f,null,b(g.value,t=>(u(),o("li",{key:t.name},[r(n(t.name)+" — Appeared "+n(t.count)+" time",1),t.count>1?(u(),o("span",J,"s")):A("",!0)]))),128))])]))]),l("div",P,[e[20]||(e[20]=l("h3",null,"Users by Country",-1)),v(l("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>m.value=t),onChange:B},[e[18]||(e[18]=l("option",{disabled:"",value:""},"Select a country",-1)),(u(),o(f,null,b($,t=>l("option",{key:t,value:t},n(t),9,Q)),64))],544),[[V,m.value]]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=t=>i.value=t)},null,512),[[x,i.value]]),e[19]||(e[19]=r(" Only Active "))]),l("ul",null,[(u(!0),o(f,null,b(D.value,t=>(u(),o("li",{key:t.id},n(t.first_name)+" "+n(t.last_name)+"s ",1))),128))])])])}}}),Z=T(R,[["__scopeId","data-v-41e44b16"]]);export{Z as default};
