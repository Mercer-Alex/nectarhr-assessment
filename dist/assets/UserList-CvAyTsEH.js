import{d as j,r as u,f as M,g as O,c as s,h as E,a as l,i as H,j as I,b as C,k as r,t as n,w as v,l as x,m as w,F as b,n as U,v as T,o,_ as q}from"./index-wQ0IrAxK.js";const K={class:"card"},X={class:"user-table-all"},z={key:0},G={class:"user-table-duplicates"},J={key:0},P={key:0},Q={class:"user-table-country"},R={key:0},W=["value"],Y=j({__name:"UserList",setup(Z){const d=u(!1),p=u(!1),m=u(!1),D=u([]),k=u([]),N=u([]),y=u(""),c=u(2),i=u(!1),f=u("first_name"),A=u("name"),L=["US","CA","UK","UA","DE","MX"],g=M(()=>[...D.value].sort((a,e)=>a[f.value].localeCompare(e[f.value]))),B=M(()=>[...k.value].sort((a,e)=>A.value==="name"?a.name.localeCompare(e.name):e.count-a.count)),S=async()=>{const a=await fetch(`/api/users?active=${i.value}`);D.value=await a.json()},$=async()=>{const a=`/api/users/duplicate-names?count=${c.value}&active=${i.value}`,V=await(await fetch(a)).json();console.log(k),k.value=V.duplicates},F=async()=>{if(!y.value)return;const a=await fetch(`/api/users/by-country/${y.value}?active=${i.value}`);N.value=await a.json()};return O(async()=>{S(),$()}),(a,e)=>{const V=I("H2");return o(),s("div",K,[E(V,null,{default:H(()=>e[10]||(e[10]=[r("User Data")])),_:1}),l("div",X,[l("h3",{onClick:e[0]||(e[0]=t=>d.value=!d.value),style:{cursor:"pointer"}},[e[11]||(e[11]=r(" All Users ")),l("span",null,n(d.value?"▸":"▾"),1)]),d.value?C("",!0):(o(),s("div",z,[l("label",null,[e[13]||(e[13]=r(" Sort by: ")),v(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t)},e[12]||(e[12]=[l("option",{value:"first_name"},"First Name",-1),l("option",{value:"last_name"},"Last Name",-1)]),512),[[x,f.value]])]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t)},null,512),[[w,i.value]]),e[14]||(e[14]=r(" Only Active "))]),l("button",{onClick:S},"Load All Users"),l("ul",null,[(o(!0),s(b,null,U(g.value,t=>(o(),s("li",{key:t.id},n(t.first_name)+" "+n(t.last_name)+" ("+n(t.country)+") - "+n(t.active?"Active":"Inactive"),1))),128))])]))]),l("div",G,[l("h3",{onClick:e[3]||(e[3]=t=>p.value=!p.value),style:{cursor:"pointer"}},[r(" Duplicate User Names (Min Count: "+n(c.value)+") ",1),l("span",null,n(p.value?"▸":"▾"),1)]),p.value?C("",!0):(o(),s("div",J,[l("label",null,[e[15]||(e[15]=r(" Min Count: ")),v(l("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t),min:"1"},null,512),[[T,c.value,void 0,{number:!0}]])]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>i.value=t)},null,512),[[w,i.value]]),e[16]||(e[16]=r(" Only Active "))]),l("label",null,[e[18]||(e[18]=r(" Sort by: ")),v(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>A.value=t)},e[17]||(e[17]=[l("option",{value:"name"},"Name",-1),l("option",{value:"count"},"Count",-1)]),512),[[x,A.value]])]),l("button",{onClick:$},"Load Duplicates"),l("ul",null,[(o(!0),s(b,null,U(B.value,t=>(o(),s("li",{key:t.name},[r(n(t.name)+" — Appeared "+n(t.count)+" time",1),t.count>1?(o(),s("span",P,"s")):C("",!0)]))),128))])]))]),l("div",Q,[l("h3",{onClick:e[7]||(e[7]=t=>m.value=!m.value),style:{cursor:"pointer"}},[e[19]||(e[19]=r(" Users by Country ")),l("span",null,n(m.value?"▸":"▾"),1)]),m.value?C("",!0):(o(),s("div",R,[v(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>y.value=t),onChange:F},[e[20]||(e[20]=l("option",{disabled:"",value:""},"Select a country",-1)),(o(),s(b,null,U(L,t=>l("option",{key:t,value:t},n(t),9,W)),64))],544),[[x,y.value]]),l("label",null,[v(l("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>i.value=t)},null,512),[[w,i.value]]),e[21]||(e[21]=r(" Only Active "))]),l("ul",null,[(o(!0),s(b,null,U(N.value,t=>(o(),s("li",{key:t.id},n(t.first_name)+" "+n(t.last_name)+"s ",1))),128))])]))])])}}}),h=q(Y,[["__scopeId","data-v-a6fcf489"]]);export{h as default};
