import{d as H,r as n,f as j,g as I,c as o,h as T,a as l,i as q,j as z,b as f,k as r,t as a,w as i,l as x,m as D,F as C,n as b,v as G,o as u,_ as J}from"./index-ChR3freD.js";const K={class:"card"},P={class:"user-table-all"},Q={key:0,class:"all-users"},R={class:"user-table-duplicates"},W={key:0,class:"duplicate-users"},X={key:0},Y={class:"user-table-country"},Z={key:0,class:"users-country"},_=["value"],h=H({__name:"UserList",setup(ee){const v=n(!1),d=n(!1),c=n(!1),N=n([]),g=n([]),$=n([]),p=n(""),m=n(2),k=n(!1),U=n(!1),A=n(!1),y=n("first_name"),w=n("name"),L=n([]),B=async()=>{try{const s=await fetch("/api/countries");L.value=await s.json()}catch(s){console.error("Error fetching countries:",s.message)}},F=j(()=>[...N.value].sort((s,e)=>s[y.value].localeCompare(e[y.value]))),O=j(()=>[...g.value||[]].sort((s,e)=>w.value==="name"?s.name.localeCompare(e.name):e.count-s.count)),S=async()=>{try{const s=await fetch(`/api/users?active=${k.value}`);N.value=await s.json()}catch(s){console.error(s.message)}},M=async()=>{try{const s=`/api/users/duplicate-names?count=${m.value}&active=${U.value}`,V=await(await fetch(s)).json();g.value=V.duplicates}catch(s){console.error(s.message)}},E=async()=>{if(p.value)try{const s=await fetch(`/api/users/by-country/${p.value}?active=${A.value}`);$.value=await s.json()}catch(s){console.error(s.message)}};return I(async()=>{S(),M(),B()}),(s,e)=>{const V=z("H2");return u(),o("div",K,[T(V,null,{default:q(()=>e[10]||(e[10]=[r("User Data")])),_:1}),l("div",P,[l("h3",{onClick:e[0]||(e[0]=t=>v.value=!v.value),style:{cursor:"pointer"}},[e[11]||(e[11]=r(" All Users ")),l("span",null,a(v.value?"▸":"▾"),1)]),v.value?f("",!0):(u(),o("div",Q,[l("label",null,[e[13]||(e[13]=r(" Sort by: ")),i(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t)},e[12]||(e[12]=[l("option",{value:"first_name"},"First Name",-1),l("option",{value:"last_name"},"Last Name",-1)]),512),[[x,y.value]])]),l("label",null,[i(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>k.value=t)},null,512),[[D,k.value]]),e[14]||(e[14]=r(" Only Active "))]),l("button",{onClick:S},"Load All Users"),l("ul",null,[(u(!0),o(C,null,b(F.value,t=>(u(),o("li",{key:t.id},a(t.first_name)+" "+a(t.last_name)+" ("+a(t.country)+") - "+a(t.active?"Active":"Inactive"),1))),128))])]))]),l("div",R,[l("h3",{onClick:e[3]||(e[3]=t=>d.value=!d.value),style:{cursor:"pointer"}},[r(" Duplicate User Names (Min Count: "+a(m.value)+") ",1),l("span",null,a(d.value?"▸":"▾"),1)]),d.value?f("",!0):(u(),o("div",W,[l("label",null,[e[15]||(e[15]=r(" Min Count: ")),i(l("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),min:"1"},null,512),[[G,m.value,void 0,{number:!0}]])]),l("label",null,[i(l("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>U.value=t)},null,512),[[D,U.value]]),e[16]||(e[16]=r(" Only Active "))]),l("label",null,[e[18]||(e[18]=r(" Sort by: ")),i(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>w.value=t)},e[17]||(e[17]=[l("option",{value:"name"},"Name",-1),l("option",{value:"count"},"Count",-1)]),512),[[x,w.value]])]),l("button",{onClick:M},"Load Duplicates"),l("ul",null,[(u(!0),o(C,null,b(O.value,t=>(u(),o("li",{key:t.name},[r(a(t.name)+" — Appeared "+a(t.count)+" time",1),t.count>1?(u(),o("span",X,"s")):f("",!0)]))),128))])]))]),l("div",Y,[l("h3",{onClick:e[7]||(e[7]=t=>c.value=!c.value),style:{cursor:"pointer"}},[e[19]||(e[19]=r(" Users by Country ")),l("span",null,a(c.value?"▸":"▾"),1)]),c.value?f("",!0):(u(),o("div",Z,[i(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>p.value=t)},[e[20]||(e[20]=l("option",{disabled:"",value:""},"Select a country",-1)),(u(!0),o(C,null,b(L.value,t=>(u(),o("option",{key:t,value:t},a(t),9,_))),128))],512),[[x,p.value]]),l("label",null,[i(l("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>A.value=t)},null,512),[[D,A.value]]),e[21]||(e[21]=r(" Only Active "))]),l("button",{onClick:E},"Load by Country"),l("ul",null,[(u(!0),o(C,null,b($.value,t=>(u(),o("li",{key:t.id},a(t.first_name)+" "+a(t.last_name)+"s ",1))),128))])]))])])}}}),le=J(h,[["__scopeId","data-v-fcf6a747"]]);export{le as default};
